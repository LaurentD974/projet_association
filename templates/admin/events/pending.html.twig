{% extends 'base.html.twig' %}

{% block title %}Événements à valider{% endblock %}

{% block body %}
<div class="container py-4">
  <div class="d-flex align-items-center justify-content-between mb-3">
    <h1 class="h4 text-success m-0">🕒 Événements en attente de validation</h1>
    <a href="{{ path('admin_dashboard') }}" class="btn btn-outline-secondary">⬅️ Retour au dashboard</a>
  </div>

  {% if events is empty %}
    <div class="alert alert-info">Aucun événement à valider.</div>
  {% else %}
    {# Idéalement trier côté contrôleur ; fallback ici : #}
    {% set pending = events|sort((a, b) => a.startDate <=> b.startDate) %}

    <ul class="list-group mb-4">
      {% for event in pending %}
        <li class="list-group-item d-flex justify-content-between align-items-center gap-3">
          <div class="flex-grow-1">
            <div class="fw-semibold">{{ event.title }}</div>
            <small class="text-muted">
              <time datetime="{{ event.startDate ? event.startDate|date('c') : '' }}">
                {{ event.startDate ? event.startDate|date('d/m/Y H:i') : '—' }}
              </time>
              {% if event.location %} — {{ event.location }}{% endif %}
            </small>
          </div>
          <div class="btn-group">
            <a href="{{ path('admin_events_validate_one', { id: event.id }) }}" class="btn btn-sm btn-success" title="Valider">✅ Valider</a>
            <a href="{{ path('admin_events_edit', { id: event.id }) }}" class="btn btn-sm btn-warning" title="Modifier">✏️ Modifier</a>
          </div>
        </li>
      {% endfor %}
    </ul>
  {% endif %}
</div>
{% endblock %}
