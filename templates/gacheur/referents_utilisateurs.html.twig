{% extends 'base.html.twig' %}

{% block title %}ItinÃ©rants â†” Anciens{% endblock %}

{% block body %}
<div class="container mt-4">

  <!-- ğŸ”™ Bouton retour -->
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2 class="text-success">ğŸ”— Associations ItinÃ©rants â†” Anciens rÃ©fÃ©rents </h2>
    <a href="{{ path('gacheur_dashboard') }}" class="btn btn-outline-primary">
      ğŸ“Š Retour au tableau de bord
    </a>
  </div>

  <!-- âœ… Flash messages -->
  {% for message in app.flashes('success') %}
    <div class="alert alert-success d-flex align-items-center" role="alert">
      âœ… {{ message }}
    </div>
  {% endfor %}

  <!-- â• Bouton pour crÃ©er une association -->
  <div class="text-end mb-3">
    <a href="{{ path('associer_referent') }}" class="btn btn-primary">
      â• Associer un nouveau rÃ©fÃ©rent
    </a>
  </div>

  <!-- ğŸ“‹ Tableau des associations -->
  <div class="card shadow border-0">
    <div class="card-body">
      <table class="table table-hover align-middle">
        <thead class="table-light">
          <tr>
            <th>ItinÃ©rant</th>
            <th>Ancien RÃ©fÃ©rent</th>
            <th class="text-center">Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for association in associations %}
            <tr>
              <td>
                {{ association.responsableDe.prenom }} {{ association.responsableDe.nom }}
              </td>
              <td>
                {{ association.referent.prenom }} {{ association.referent.nom }}
              </td>
              <td class="text-center">
                <a href="{{ path('modifier_association', { id: association.id }) }}" class="btn btn-sm btn-outline-success me-2">
                  ğŸ–Šï¸ Modifier
                </a>
                <form method="post" action="{{ path('supprimer_association', { id: association.id }) }}"
                      style="display:inline-block;" onsubmit="return confirm('Confirmer la suppression ?');">
                  <input type="hidden" name="_token" value="{{ csrf_token('delete_association_' ~ association.id) }}">
                  <button class="btn btn-sm btn-outline-danger">ğŸ—‘ï¸ Supprimer</button>
                </form>
              </td>
            </tr>
          {% else %}
            <tr>
              <td colspan="3" class="text-center text-muted">Aucune association trouvÃ©e.</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}