{% extends 'base.html.twig' %}

{% block title %}Accueil{% endblock %}

{% block body %}

<header class="py-3" style="background-color:#664315;">
  <div class="container">
    <div class="d-flex align-items-center justify-content-between flex-wrap gap-3">
      <a href="https://www.compagnons-du-devoir.com/" target="_blank" rel="noopener" class="text-decoration-none">
        <img src="{{ asset('image/aocdtf-logo.svg') }}" alt="Logo des Compagnons du Devoir" class="img-fluid" style="height:120px">
      </a>

      <h1 class="h4 text-white text-center m-0 flex-grow-1">
        Association Ouvri√®re des Compagnons du Devoir et du Tour de France<br>
        <span aria-label="√Æle">üèùÔ∏è</span> √éle de la R√©union <span aria-label="Palmier">üå¥</span>
      </h1>

      <div class="d-flex align-items-center gap-2 ms-auto">
        <a href="{{ path('contact_form') }}" class="btn btn-outline-light btn-sm">Contact</a>
        {% if is_granted('IS_AUTHENTICATED_REMEMBERED') %}
          <a href="{{ path('app_logout') }}" class="btn btn-light btn-sm">Se d√©connecter</a>
        {% else %}
          <a href="{{ path('app_login') }}" class="btn btn-light btn-sm">Se connecter</a>
        {% endif %}
      </div>
    </div>
  </div>
</header>

{# Flash messages #}
{% for label, messages in app.flashes %}
  {% for message in messages %}
    <div class="alert alert-{{ label }} alert-dismissible fade show mt-3 mx-3" role="alert">
      {{ message }}
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Fermer"></button>
    </div>
  {% endfor %}
{% endfor %}

<main>
  <section class="container mt-5">
    <div class="row gy-4 align-items-stretch">
      {# Colonne texte #}
      <div class="col-12 col-md-4 d-flex flex-column justify-content-between px-0 px-md-4">
        <div>
          <h2 class="h4">Qui sommes-nous ?</h2>
          <p>
            L‚ÄôAssociation Ouvri√®re des Compagnons du Devoir et du Tour de France (AOCDTF)
            est une association loi de 1901, reconnue d‚Äôutilit√© publique. Elle r√©unit des
            hommes et des femmes de m√©tier autour d‚Äôun m√™me id√©al : permettre √† chacun
            de s‚Äôaccomplir dans et par son m√©tier.<br><br>

            Elle transmet des savoir-faire techniques et des valeurs humaines comme la
            solidarit√©, la fraternit√© et la g√©n√©rosit√©.<br><br>

            Gr√¢ce √† la qualit√© de sa formation, √† ses exp√©riences en entreprise et √† son
            ouverture √† l‚Äôinternational, l‚ÄôAOCDTF a int√©gr√© la Conf√©rence des grandes √©coles
            en 2014.<br><br>

            Le compagnonnage est une exp√©rience humaine, culturelle et professionnelle,
            reconnue depuis 2010 par l‚ÄôUnesco comme patrimoine culturel immat√©riel.
          </p>
        </div>
      </div>

      {# Colonne image #}
      <div class="col-12 col-md-5 d-flex align-items-center justify-content-center">
        <img
          src="{{ asset('image/Photo-de-groupe-CFA-Tours-768x768.jpg') }}"
          alt="Photo de groupe des Compagnons du Devoir"
          class="img-fluid rounded shadow"
        >
      </div>

      {# Colonne actualit√©s #}
      <div class="col-12 col-md-3 d-flex flex-column justify-content-between px-0 px-md-4">
        <div class="card shadow-sm h-100">
          <div class="card-header text-white" style="background-color:#d2b48c;">
            <h4 class="h6 mb-0">
              <i class="bi bi-megaphone-fill me-2"></i>Derni√®res actualit√©s
            </h4>
          </div>
          <div class="card-body">
            {% if newsList|length > 0 %}
              <div id="newsCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="7000">
                <div class="carousel-inner w-100">
                  {% for news in newsList %}
                    {% if news.isPublished %}
                      <div class="carousel-item w-100 {% if loop.first %}active{% endif %} p-3">
                        <h5 class="h6 text-dark mb-2">{{ news.title }}</h5>
                        <p class="text-muted mb-0">
                          {{ news.content|length > 250 ? news.content[:250] ~ '...' : news.content }}
                        </p>
                      </div>
                    {% endif %}
                  {% endfor %}
                </div>

                <button class="carousel-control-prev" type="button" data-bs-target="#newsCarousel" data-bs-slide="prev">
                  <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                  <span class="visually-hidden">Pr√©c√©dent</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#newsCarousel" data-bs-slide="next">
                  <span class="carousel-control-next-icon" aria-hidden="true"></span>
                  <span class="visually-hidden">Suivant</span>
                </button>
              </div>
            {% else %}
              <p class="text-center text-muted mb-0">Aucune actualit√© publi√©e pour le moment.</p>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  </section>
</main>

{% endblock %}
